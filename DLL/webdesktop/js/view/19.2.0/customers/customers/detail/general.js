define(["jquery","mobile","underscore","backbone","shared/global","shared/service","shared/method","shared/shared","model/base","model/lookupcriteria","collection/base","collection/countries","collection/postal","collection/classtemplates","text!template/19.2.0/customers/customers/detail/general.tpl.html","view/19.2.0/pos/postal/addpostal","js/libs/iscroll.js"],function(t,e,a,s,l,o,i,n,d,r,c,u,C,h,p,m){var y,v="#chkloyalty-points",f=!1,g="#data-loyaltypoints",T=function(t){1==t?y.AddNewPostal():y.ClearPostalDetails()},F=s.View.extend({_generalTemplate:a.template(p),events:{"change #data-city":"SetState","change #data-postal-code":"buttonLoadOnFocus","keyup #data-postal-code":"Postal_keyup","change #data-country":"CountryChanged","change #data-class-template":"ClassTemplateChanged","change #data-shiptoclass-template":"ShipToClassTemplateChanged","focus #data-telephone":"AssignNumericValidation","tap #chkloyalty-points":"LoyatyPoints_CheckedChanged"},IsNew:!1,initialize:function(){this.on("postalsRetrieved",this.CheckPostal,this),this.$el.show(),y=this},render:function(){y=this,this.onLoad=!0,console.log("LOAD "),this.FormatCustomerName();var e=this.model.attributes.OutstandingPoints;return this.model.set({OutstandingPoints:Math.round(e)}),this.$el.html(this._generalTemplate(this.model.toJSON())),this.DisplayCityOnLoad(),this.IsNew&&t(".table-preview").css("display","none"),this.IsNew||(this.originalModel=new d,this.originalModel.set(this.model.attributes)),t("#data-report-printer").val(this.model.get("POSSalesReceipt")),this},InitializeTrackLoyaltyPoints:function(){this.IsNew&&this.$(g).hide(),n.IsNullOrWhiteSpace(this.model.get("TrackLoyaltyPoints"))?(f=!0,this.LoyatyPoints_CheckedChanged()):(f=!1,this.LoyatyPoints_CheckedChanged())},FormatCustomerName:function(){var t=this.model.get("CustomerName");this.model.set({FormattedName:n.Escapedhtml(t)})},Show:function(){this.InitializeThings(),this.render(),this.RefreshiScroll(),this.LoadDrapDowns(),this.ManageButtons(),this.InitializeTrackLoyaltyPoints(),this.IsNew||(n.ShowHideClassTemplates("table-data tr.tr-ClassTemplate"),n.ShowHideClassTemplates("table-data tr.tr-shipToClassTemplate"))},ManageButtons:function(){this.IsNew&&this.ResetElementValues()},DisableButtons:function(){t("#data-city").addClass("ui-disabled"),t("#data-country").addClass("ui-disabled"),t("#data-class-template").addClass("ui-disabled"),t("#data-report-printer").addClass("ui-disabled"),t("#data-customer-name").attr("readonly",!0),t("#data-postal-code").attr("readonly",!0),t("#data-address").attr("readonly",!0),t("#data-email").attr("readonly",!0),t("#data-telephone").attr("readonly",!0),t("#data-state").attr("readonly",!0),t("#data-website").attr("readonly",!0)},ResetElementValues:function(){t("#data-class-template").removeClass("ui-disabled"),t("#data-city").removeClass("ui-disabled"),t("#data-country").removeClass("ui-disabled"),t("#data-report-printer").removeClass("ui-disabled"),t("#data-customer-name").val(""),t("#data-customer-name").attr("readonly",!1),t("#data-postal-code").attr("readonly",!1),t("#data-address").attr("readonly",!1),t("#data-email").attr("readonly",!1),t("#data-telephone").attr("readonly",!1),t("#data-state").attr("readonly",!1),t("#data-website").attr("readonly",!1),t("#data-customer-name").focus()},InitializeThings:function(){this.countrySelected=this.model.get("Country"),null!=this.countrySelected&&""!=this.countrySelected||(this.countrySelected=l.CompanyCountry),this.InitializeModelsAndCollections()},InitializeModelsAndCollections:function(){var t=1e4;this.countryModel||(this.countryModel=new r,this.countryModel.url=l.ServiceUrl+o.CUSTOMER+i.COUNTRYCODELOOKUP+t),this.postalmodel||(this.postalmodel=new d),this.postalCollection||(this.postalCollection=new c),this.countryCollection||(this.countryCollection=new u)},Postal_keyup:function(){l.ListJustTapped=!1},DisplayCityOnLoad:function(){if(console.log("onload : "+this.onLoad),!n.IsNullOrWhiteSpace(this.onLoad)){this.onLoad=!1;var e=this.model.get("City"),a=this.model.get("State");n.IsNullOrWhiteSpace(e)||"Please enter city"==e?this.ClearCity():(t('#data-city > option[val !=""]').remove(),t("#data-city").append(new Option(e,e)),t("#data-city").prop("selectedIndex",0),console.log("Change City")),n.IsNullOrWhiteSpace(a)||"Please enter state code"==a?t("#data-state").val(""):t("#data-state").val(a),console.log("CITY : "+e+" , STATE :"+a),console.log("onload : "+this.onLoad)}},buttonLoadOnFocus:function(e){e.preventDefault(),this.postal=t("#data-postal-code").val(),this.LoadPostal(this.postal)},LoyatyPoints_CheckedChanged:function(){f=n.CustomCheckBoxChange(v,f)},ClearPostalInfo:function(){t("#data-postal-code").val(""),t("#data-state").val(""),this.ClearCity()},ClearCity:function(){console.log("ClearCity"),t('#data-city > option[val !=""]').remove(),t("#data-city").append(new Option("City","")),t("#data-city").val(""),t("#data-state").val("")},LoadPostal:function(e){if(""==e)this.ClearCity();else{var a=this;n.LoadPostalByCode(e,function(t){a.DisplayResultOnPostal(t);var e=a.IsPrioritizeFromPostalCode(a.countryCollection,a.countrySelected);switch(e){case!0:a.LoadClasscodeFromPostal()}},function(e){a.postalCollection.reset(),a.postalCollection.RequestError(e,"Error Loading Postal Code"),a.model?t("#data-postal-code").val(a.model.get("PostalCode")):t("#data-postal-code").val("")})}},IsPrioritizeFromPostalCode:function(t,e){var a=t.find(function(t){return t.get("CountryCode")===e&&(t.get("IsRetailCustomerBillToClassPostal")===!0||t.get("IsWholesaleCustomerBillToClassPostal")===!0)});return a&&(a.get("IsRetailCustomerBillToClassPostal")===!0?this.priorityPostalType="Retail":a.get("IsWholesaleCustomerBillToClassPostal")===!0&&(this.priorityPostalType="Wholesale")),!!a},LoadClasscodeFromPostal:function(){var e=this.postalCollection.at(0);if(!n.IsNullOrWhiteSpace(this.postalCollection)&&this.postalCollection.length>0){var e=this.postalCollection.at(0),a=e.get("DefaultRetailCustomerBillToClassTemplate"),s=e.get("DefaultRetailCustomerShipToClassTemplate"),l=e.get("DefaultWholesaleCustomerBillToClassTemplate"),o=e.get("DefaultWholesaleCustomerShipToClassTemplate");!n.IsNullOrWhiteSpace(a)&&!n.IsNullOrWhiteSpace(s)||!n.IsNullOrWhiteSpace(l)&&!n.IsNullOrWhiteSpace(o)?"Retail"===this.priorityPostalType?(t("#data-class-template option[value='"+a+"']").attr("selected","selected"),t("#data-shiptoclass-template option[value='"+s+"']").attr("selected","selected"),this.SelectedClassCode=a,this.SelectedShipToClassCode=s):(t("#data-class-template option[value='"+l+"']").attr("selected","selected"),t("#data-shiptoclass-template option[value='"+defaultWholesaleShipto+"']").attr("selected","selected"),this.SelectedClassCode=l,this.SelectedShipToClassCode=defaultWholesaleShipto):(t("#data-class-template option[value='"+this.defaultClassCode+"']").attr("selected","selected"),t("#data-shiptoclass-template option[value='"+this.defaultShipToClassCode+"']").attr("selected","selected"))}},RemoveInvalidPostals:function(t){var e=t.get("CountryCode");e===this.countrySelected&&this.newCollection.add(t)},AddNewPostal:function(){console.log("AddNewPostal");var e=t("#addPostalCodeContainer"),a=t("#data-postal-code").val();t(e).html("<div id='addPostalContainer' style='display: none'></div>");var s=t("#addPostalContainer");n.IsNullOrWhiteSpace(this.newPostalView)?this.newPostalView=new m({el:s}):(this.newPostalView.remove(),this.newPostalView=new m({el:s})),this.newPostalView.on("AcceptPostal",this.AcceptPostal,this),this.newPostalView.on("ClearPostal",this.ClearPostalDetails,this),this.newPostalView.Show(a,this.countrySelected,this.countryCollection)},AcceptPostal:function(e){this.countrySelected=e.CountryCode,t("#data-country > option[value='"+this.countrySelected+"']").attr("selected","selected"),t("#data-country").trigger("change"),t("#data-postal-code").val(e.PostalCode),t("#data-state").val(e.StateCode),this.postal=e.PostalCode,this.city=e.City,this.LoadPostal(this.postal)},ClearPostalDetails:function(){t("#data-postal-code").val(""),this.postal="",this.ClearCity()},CheckPostal:function(){this.DisplayResultOnPostal()},ResetPostalFields:function(){t("#data-postal-code").focus()},DisplayResultOnPostal:function(e){var a=t("#data-postal-code").val();if(this.newCollection=new C,this.postalCollection.reset(e),this.postalCollection.each(this.RemoveInvalidPostals,this),this.postalCollection=this.newCollection,0===this.postalCollection.length){if(l.ListJustTapped)return;navigator.notification.confirm("The Postal Code '"+a+"' does not exist in the Country selected. Do you want to add '"+a+"' ?",T,"Postal Not Found",["Yes","No"])}else t('#data-city > option[val !=""]').remove(),this.LoadRetrievedPostal(),t("#data-city").prop("selectedIndex",0),t("#data-city").trigger("change")},SetFields:function(e){var a=e.get("City");this.county=e.get("County"),t("#data-city").append(new Option(a,a))},SetState:function(){var e=t("#data-city option:selected").val();if(""!=e){var a=this.postalCollection.find(function(t){return e=t.get("City")});if(!a)return void t("#data-state").val("");var s=a.get("StateCode");t("#data-state").val(s),console.log("City : "+a.get("City"))}else t("#data-state").val("")},LoadRetrievedPostal:function(){this.postalCollection.each(this.SetFields,this)},RefreshiScroll:function(){this.myScroll?this.myScroll.refresh():this.myScroll=new iScroll("detail-body",{vScrollbar:!0,vScroll:!0,snap:!0,momentum:!0,onBeforeScrollStart:function(t){for(var e=t.target;1!=e.nodeType;)e=e.parentNode;"SELECT"!=e.tagName&&"INPUT"!=e.tagName&&"TEXTAREA"!=e.tagName&&t.preventDefault()}})},LoadDrapDowns:function(){var t=(this.model.get("City"),this.model.get("Country"));this.LoadCountries(),this.FetchClassCodes(t),this.IsNew&&this.LoadClassTemplatesByCountry(t),this.SetCustomerType(this.model.get("BusinessType"))},LoadCountries:function(){var t=this;this.index=0,this.countryModel.set({Criteria:""}),this.countryModel.save(null,{success:function(e,a){l.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator(),t.countryCollection.reset(a.Countries),t.DisplayCountries(),t.SetSelectedCountry()},error:function(t,e,a){l.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator(),t.RequestError(e,"Error Loading Country List")}})},SetCustomerType:function(e){this.IsNew||t("#data-customertype").attr("disabled","disabled"),t("#data-customertype").val(e)},DisplayCountries:function(){0===this.countryCollection.length?(console.log("no countries available."),navigator.notification.alert("No country available.",null,"No Country Found","OK")):(t('#data-country > option[val !=""]').remove(),this.LoadRetrievedCountry())},LoadRetrievedCountry:function(){this.countryCollection.each(this.SetCountryOptions,this)},SetCountryOptions:function(e){var a=e.get("CountryCode");t("#data-country").append(new Option(a,a))},SetSelectedCountry:function(){var e=t("#data-postal-code").val();t("#data-country > option[value='"+this.countrySelected+"']").attr("selected","selected"),""!==e.trim()&&this.LoadPostal(e)},CountryChanged:function(e){var a=e.target.id,s=t("#"+a).val(),l=t("#data-postal-code").val();this.countrySelected!=s&&l.length>0&&this.ClearPostalInfo(),this.countrySelected=s,this.LoadClassTemplatesByCountry(s),this.PreviousCountrySelected=s},CustomerTypeChanged:function(e){var a=e.target.id,s=t("#"+a).val();if(this.SelectedClassCode!==s&&s&&""!=s){this.businessType=s;var l;if(l="Wholesale"==s?this.WholesaleClass:this.RetailClass,!l)return;this.SelectedClassCode=l.get("ClassCode")}},ClassTemplateChanged:function(e){var a=e.target.id,s=t("#"+a).val();this.SelectedClassCode!==s&&(this.SelectedClassCode=s)},ShipToClassTemplateChanged:function(e){var a=e.target.id,s=t("#"+a).val();this.SelectedShipToClassCode!==s&&(this.SelectedShipToClassCode=s,this.shipToClassTemplateCollection&&this.shipToClassTemplateCollection.length>0&&(this.ShipToClassTemplate=this.shipToClassTemplateCollection.find(function(t){return t.get("ClassCode")===s})))},LoadClassTemplatesByCountry:function(t){this.IsNew&&(this.LoadCustomerClassTemplatesByCountry(t),this.LoadShipToClassTemplatesByCountry(t))},LoadCustomerClassTemplatesByCountry:function(t){if(t&&""!=t){var e=this,a=new d({StringValue:t});a.url=l.ServiceUrl+o.CUSTOMER+i.GETCUSTOMERCLASSTEMPLATEBYCOUNTRY,a.save(a,{success:function(t,a){if(l.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator(),t.get("ClassTemplates")&&0!=t.get("ClassTemplates").length){var s=t.get("ClassTemplates");e.PopulateCustomerClassTemplates(s)}},error:function(t,e,a){l.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator()}})}},LoadShipToClassTemplatesByCountry:function(t){if(t&&""!=t){var e=this,a=new d({StringValue:t});a.url=l.ServiceUrl+o.CUSTOMER+i.GETSHIPTOCLASSTEMPLATEBYCOUNTRY,a.save(a,{success:function(t,a){if(l.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator(),t.get("ClassTemplates")&&0!=t.get("ClassTemplates").length){var s=t.get("ClassTemplates");e.PopulateShipToClassTemplates(s)}},error:function(t,e,a){l.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator()}})}},PopulateCustomerClassTemplates:function(e){this.customerClassTemplateCollection||(this.customerClassTemplateCollection=new h),this.customerClassTemplateCollection.reset(e),l.DefaultClassCode=null,t("#data-class-template").html(""),this.customerClassTemplateCollection.each(function(e){t("#data-class-template").append(new Option(e.get("ClassCode")+" | "+e.get("ClassDescription"),e.get("ClassCode")))});var a=this.customerClassTemplateCollection.find(function(t){return 1==t.get("IsDefault")});try{if(a instanceof d){var s=a.get("ClassCode");a.get("ClassDescription");l.DefaultClassCode=s,this.defaultClassCode=s,t("#data-class-template option[value='"+s+"']").attr("selected","selected")}}catch(o){navigator.notification.alert(o.message,null,o.name,"OK")}},PopulateShipToClassTemplates:function(e){this.shipToClassTemplateCollection||(this.shipToClassTemplateCollection=new h),this.shipToClassTemplateCollection.reset(e),t("#data-shiptoclass-template").html(""),this.shipToClassTemplateCollection.each(function(e){t("#data-shiptoclass-template").append(new Option(e.get("ClassCode")+" | "+e.get("ClassDescription"),e.get("ClassCode")))});var a=this.shipToClassTemplateCollection.find(function(t){return 1==t.get("IsDefault")});try{if(a instanceof d){var s=a.get("ClassCode"),o=(a.get("ClassDescription"),a.get("PaymentTermCode")),i=a.get("TaxCode");l.DefaultShipToCode=s,this.defaultShipToClassCode=s,this.defaultPaymentTermCode=o,this.defaultTaxCode=i,t("#data-shiptoclass-template option[value='"+s+"']").attr("selected","selected")}}catch(n){navigator.notification.alert(n.message,null,n.name,"OK")}},ChangeClassCode:function(t){if(t&&""!=t){var e,a,s,n=this;r=new d;var r=new d({StringValue:t});r.url=l.ServiceUrl+o.CUSTOMER+i.GETDEFAULTCLASSTEMPLATESBYCOUNTRY+"false",r.save(r,{success:function(t,o){if(l.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator(),t.get("ClassTemplates")&&0!=t.get("ClassTemplates").length){var i=t.get("ClassTemplates");n.RetailClass=new d,n.WholesaleClass=new d;for(var r=0;r<i.length;r++)"Wholesale"==i[r].BusinessType&&(n.WholesaleClass=new d(i[r]),n.WholesaleClass.set({ClassDescription:"Wholesale"})),"Retail"==i[r].BusinessType&&(n.RetailClass=new d(i[r]),n.RetailClass.set({ClassDescription:"Retail"}),l.DefaultClassCode=i[r].ClassCode,e=i[r].ClassCode,e=i[r].ClassCode,s=i[r].PaymentTermCode,a=i[r].TaxCode);n.SetCustomerSchemaFields(e,s,a)}},error:function(t,e,a){l.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator()}})}},FetchClassCodes:function(t){if(t&&""!=t){var e=this,a=new r;a.url=l.ServiceUrl+o.CUSTOMER+i.CLASSTEMPLATELOOKUP+100+"/false",a.set({StringValue:t}),a.save(null,{success:function(t,a){l.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator(),e.ResetClassTemplates(a.ClassTemplates)},error:function(t,e,a){l.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator(),t.RequestError(e,"Error Fetching Class Template List")}})}},ResetClassTemplates:function(e){this.classTemplateCollection||(this.classTemplateCollection=new h),this.classIndex=0,this.classTemplateCollection.reset(e),0!==this.classTemplateCollection.length&&(t('#data-class-template > option[val !=""]').remove(),this.classTemplateCollection.each(this.FillClassTemplateComboBox,this),l.Preference.AllowChangeClassTemplate&&void 0!==l.Preference.AllowChangeClassTemplate&&null!==l.Preference.AllowChangeClassTemplate?(t("#data-class-template").removeAttr("disabled"),t("#data-shiptoclass-template").removeAttr("disabled")):(document.getElementById("data-class-template").readOnly=!0,document.getElementById("data-shiptoclass-template").readOnly=!0,t("#data-class-template").attr("disabled","disabled"),t("#data-shiptoclass-template").attr("disabled","disabled")))},FillClassTemplateComboBox:function(e){var a=this.GetMustBeSelectedCode(),s=e.get("ClassDescription"),l=e.get("ClassCode");t("#data-class-template").append(new Option(l+" | "+s,l)),l===a&&(t("#data-class-template").prop("selectedIndex",this.classIndex),t("#data-class-template").trigger("change")),this.classIndex++},GetMustBeSelectedCode:function(){return this.IsNew?l.DefaultClassCode:null!==this.model.get("ClassCode")||void 0!==this.model.get("ClassCode")?this.model.get("ClassCode"):l.DefaultClassCode},SetCustomerSchemaFields:function(e,a,s){t("#data-class-template").val(e),this.paymentTerm=a,this.taxCode=s,t("#data-payment-term").val(a),t("#data-tax-code").val(s)},GetCounty:function(){if(0!==this.postalCollection.length&&void 0!==this.postalCollection)return this.postalCollection.at(0).get("County")},UpdateModelValues:function(){var e=t("#data-customer-name").val(),a=t("#data-postal-code").val(),s=t("#data-country").val(),o=t("#data-address").val(),i=t("#data-city").val(),n=t("#data-email").val(),d=t("#data-telephone").val(),r=t("#data-state").val(),c=t("#data-class-template").val(),u=t("#data-shiptoclass-template").val(),C=t("#data-website").val(),h=this.GetCounty(),p=t("#data-report-printer").val();this.model.set({CustomerName:e,Country:s,County:h,City:i,State:r,Address:o,Email:n,Telephone:d,PostalCode:a,Website:C,TrackLoyaltyPoints:f,AssignedTo:l.Username,BusinessType:"Retail",PaymentTermCode:this.defaultPaymentTermCode,TaxCode:this.defaultTaxCode,POSSalesReceipt:p}),this.IsNew&&this.model.set({ClassCode:c?c:this.defaultClassCode,ShipToClassCode:u?u:this.defaultShipToClassCode})},ValidData:function(){var e="",a=(t("#data-postal-code").val(),t("#data-customer-name").val()),s=t("#data-email").val(),l=t("#data-website").val(),o=o="DefaultPOSShopper"===this.model.get("CustomerCode")||"DefaultECommerceShopper"===this.model.get("CustomerCode");if(""===a)e="Please enter a Customer Name.";else if(null!=s&&""!=s&&this.ValidateEmailFormat(s)&&!o)e="Email format is invalid.";else{if(""===l.trim()||o)return!0;if(!n.ValidateUrlFormat(l))return!0;e="Website format is invalid."}return n.Customers.ShowNotification(e,!0),!1},ValidateEmailFormat:function(t){var e=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;return t.search(e)==-1},ValidateUrl:function(t){return/^(www)\.(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},IsCheckEmail:function(t){return!!this.IsNew||(!this.originalModel||!!(this.originalModel.get("Email")&&""!=this.originalModel.get("Email")||t&&""!=t)&&this.originalModel.get("Email")!=t)},InitializeChildViews:function(){},Close:function(){this.remove(),this.unbind()},AssignNumericValidation:function(t){n.Input.NonNegativeInteger("#"+t.target.id)}});return F});