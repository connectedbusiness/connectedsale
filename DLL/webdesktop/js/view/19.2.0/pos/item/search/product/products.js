define(["jquery","mobile","underscore","backbone","shared/global","shared/shared","view/19.2.0/pos/item/search/product/product","text!template/19.2.0/pos/item/search/product/products.tpl.html","js/libs/iscroll.js"],function(e,t,r,o,i,n,c,l){var a=o.View.extend({initialize:function(){this.$el.html(r.template(l)),this.collection.bind("reset",this.render,this),e("#lookup-content").trigger("create")},render:function(){n.BlurItemScan();var t=this.collection.sortVar;this.GroupCollection(t),e("#productListContainer").listview("refresh"),i.isBrowserMode?n.UseBrowserScroll("#lookup-content"):this.myScroll?this.myScroll.refresh():this.myScroll=new iScroll("lookup-content",{hScroll:!1})},GroupCollection:function(e){switch(e){case"ItemName":this.GroupByItemName();break;case"CategoryCode":this.GroupByCategoryCode()}},GroupByItemName:function(){var t=this.collection,o=t.pluck("ItemName"),i=r.groupBy(o,function(e){return e.charAt(0).toUpperCase()});for(var n in i)e("#productListContainer").append("<li data-role='list-divider'>"+n+"</li>"),t.each(function(t){var r=t.get("ItemName");r.charAt(0).toUpperCase()===n.toUpperCase()&&(this.productView=new c({model:t}),e("#productListContainer").append(this.productView.render().el))})},GroupByCategoryCode:function(){var t=this.collection,o=t.pluck("CategoryDescription"),i=r.groupBy(o,function(e){return null===e?e="No Category":e});for(var l in i)e("#productListContainer").append("<li data-role='list-divider'>"+n.Escapedhtml(l)+"</li>"),t.each(function(t){var r=t.get("CategoryDescription");r===l?(this.productView=new c({model:t}),e("#productListContainer").append(this.productView.render().el)):"No Category"===l&&null===r&&(this.productView=new c({model:t}),e("#productListContainer").append(this.productView.render().el))})}});return a});