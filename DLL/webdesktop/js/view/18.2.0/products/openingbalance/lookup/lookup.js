define(["jquery","mobile","underscore","backbone","shared/global","shared/shared","shared/service","shared/method","model/lookupcriteria","model/item","model/lookupcriteria","collection/products","view/18.2.0/products/openingbalance/lookup/product/products","text!template/18.2.0/products/openingbalance/lookup/lookup.tpl.html"],function(e,t,o,i,r,s,n,c,u,l,d,a,p,h){var m=i.View.extend({_template:o.template(h),events:{"tap #done-lookup":"LookupDone","keypress #products-lookup-search":"ItemLookup"},initialize:function(){},render:function(){return this.$el.html(this._template()),this.$el.show(),this},Show:function(){this.render(),this.hideOtherButtons()},Close:function(){},ItemLookup:function(t){if(13===t.keyCode){var o=e("#products-lookup-search").val();this.GetLookupItems(o.trim())}},RefreshItemList:function(){this.GetLookupItems()},GetLookupItems:function(e){s.Products.DisplayWait("#lookup-content");var t=new d;t.url=r.ServiceUrl+n.PRODUCT+c.GETITEMLISTBYITEMTYPE,t.on("sync",this.ItemRetrievalSuccess,this),t.on("error",this.ItemRetrievalFailed,this);new a;t.set({Criteria:e,ItemTypes:"'Stock', 'Matrix Item', 'Assembly'"}),t.save()},ItemRetrievalSuccess:function(e,t){if(r.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator(),!o)var o=new a;o.reset(t.Items),this.productCollection.reset(t.Items),this.RenderProductsView()},ItemRetrievalFailed:function(e,t,o){r.isBrowserMode||window.plugins.cbNetworkActivity.HideIndicator(),s.Products.RequestTimeOut()},RenderProductsView:function(){var t=new p({el:e("#lookup-content"),collection:this.productCollection});t.RefreshList(this.productCollection)},LookupDone:function(t){t.preventDefault(),e("#products-lookup-search").val(""),e("#products-lookup-search").blur(),this.trigger("done"),sortVar="ItemName"},hideOtherButtons:function(){e("#back-products").hide(),e("#add-lookup").hide(),e("#back-details").hide()}});return m});