define(["jquery","mobile","underscore","backbone","shared/global","shared/shared","view/20.0.0/pos/seriallot/list/list","text!template/20.0.0/pos/seriallot/list/lists.tpl.html","js/libs/iscroll.js"],function(e,i,t,l,s,r,o,n){var h="#serialList",c=l.View.extend({template:t.template(n),scrollAttrib:{vScrollbar:!1,vScroll:!0,snap:!1,momentum:!0,hScrollbar:!0},initialize:function(){var i=this;this.render(),this.serialCollection=this.options.serial;this.collection.each(function(e){var t=i.serialCollection.find(function(i){return i.get("SerialLotNumber")==e.get("SerialLotNumber")});t||i.RenderListView(e)}),0==e("#serialList li").length&&(this.Hide(),this.trigger("hideSerialList"))},render:function(){this.$el.append(this.template),this.$(h).listview(),this.LoadScroll()},Hide:function(){this.$("p").hide(),this.$("#serialLot-list").hide()},LoadScroll:function(){s.isBrowserMode?r.UseBrowserScroll("#serialLot-list"):this.myScroll?this.myScroll.refresh():this.myScroll=new iScroll("serialLot-list",this.scrollAttrib)},ProcessSelectedSerial:function(e){this.trigger("selected",e),this.collection.remove(e),this.RefreshListView(),this.LoadScroll()},RefreshListView:function(){this.$(h).listview("refresh")},RenderListView:function(e){var i=new o({model:e});i.on("selected",this.ProcessSelectedSerial,this),this.$(h).append(i.render().el),this.RefreshListView(),this.LoadScroll()}});return c});