define(["jquery","mobile","underscore","backbone","shared/global","shared/shared","model/base","text!template/15.1.0/products/products/detail/summary.tpl.html","js/libs/iscroll.js"],function(e,t,s,a,i,l,o,r){var n={General:"#summary-general",Pricing:"#summary-pricing",UOM:"#summary-uom",Category:"#summary-category",Department:"#summary-department",Accessory:"#summary-acc",Substitute:"#summary-sub"},c={General:"#collapse-general i",Pricing:"#collapse-pricing i",UOM:"#collapse-uom i",Department:"#collapse-department i",Category:"#collapse-category i",Accessory:"#collapse-acc i",Substitute:"#collapse-sub i"},u=a.View.extend({_summaryTemplate:s.template(r),events:{"tap #collapse-general ":"btnClick_CollapseGeneral","tap #collapse-pricing ":"btnClick_CollapsePricing","tap #collapse-uom ":"btnClick_CollapseUOM","tap #collapse-department ":"btnClick_CollapseDepartment","tap #collapse-category ":"btnClick_CollapseCategory","tap #collapse-acc ":"btnClick_CollapseAccessory","tap #collapse-sub ":"btnClick_CollapseSubstitute"},btnClick_CollapseGeneral:function(e){e.preventDefault(),this.ToggelCollapse(c.General)},btnClick_CollapseUOM:function(e){e.preventDefault(),this.ToggelCollapse(c.UOM)},btnClick_CollapsePricing:function(e){e.preventDefault(),this.ToggelCollapse(c.Pricing)},btnClick_CollapseCategory:function(e){e.preventDefault(),this.ToggelCollapse(c.Category)},btnClick_CollapseDepartment:function(e){e.preventDefault(),this.ToggelCollapse(c.Department)},btnClick_CollapseAccessory:function(e){e.preventDefault(),this.ToggelCollapse(c.Accessory)},btnClick_CollapseSubstitute:function(e){e.preventDefault(),this.ToggelCollapse(c.Substitute)},initialize:function(){this.$el.show(),this.IsNew=!1},render:function(){return this.model=new o,this.itemModel&&this.model.set(this.itemModel.attributes),this.pricingModel&&this.model.set(this.pricingModel.attributes),this.$el.html(this._summaryTemplate(l.EscapedModel(this.model).toJSON())),this},IsShowContent:function(t){var s="icon-minus-sign",a="icon-plus-sign";return e(t).hasClass(s)?(e(t).removeClass(s),e(t).addClass(a),!1):(e(t).removeClass(a),e(t).addClass(s),!0)},ToggelCollapse:function(t){switch(t){case c.General:this.IsShowContent(t)?e(n.General).show():e(n.General).hide();break;case c.Pricing:this.IsShowContent(t)?e(n.Pricing).show():e(n.Pricing).hide();break;case c.UOM:this.IsShowContent(t)?e(n.UOM).show():e(n.UOM).hide();break;case c.Department:this.IsShowContent(t)?e(n.Department).show():e(n.Department).hide();break;case c.Category:this.IsShowContent(t)?e(n.Category).show():e(n.Category).hide();break;case c.Accessory:this.IsShowContent(t)?e(n.Accessory).show():e(n.Accessory).hide();break;case c.Substitute:this.IsShowContent(t)?e(n.Substitute).show():e(n.Substitute).hide()}this.RefreshiScroll()},LoadOtherDetails:function(){var t=this;if(this.uoms){var s="<tr>";s+=t.NewTD("UM","um","",!0),s+=t.NewTD("Selling","selling","",!0),s+=t.NewTD("Quantity","qty","",!0),s+=t.NewTD("UPC Code","upc","",!0),s+="</tr>",e(n.UOM).append(s),this.uoms.each(function(s){var a="<tr>";a+=t.NewTD(s.get("UnitMeasureCode")),a+=t.NewTD(s.get("DefaultSelling")?"YES":""),a+=t.NewTD(s.get("UnitMeasureQuantity")),a+=t.NewTD(s.get("UPCCode")),a+="</tr>",e(n.UOM).append(a)})}if(this.departments&&this.departments.each(function(s){var a="<tr>";a+=t.NewTD(s.get("Description")),a+="</tr>",e(n.Department).append(a)}),this.categories&&this.categories.each(function(s){var a="<tr>";a+=t.NewTD(s.get("Description")),a+="</tr>",e(n.Category).append(a)}),this.accessories){var s="<tr>";s+=t.NewTD("Name","accCode","",!0),s+=t.NewTD("Description","accName","",!0),s+="</tr>",e(n.Accessory).append(s),this.accessories.each(function(s){var a="<tr>";a+=t.NewTD(s.get("AccessoryName"),"accCode"),a+=t.NewTD(s.get("AccessoryDesc"),"accName"),a+="</tr>",e(n.Accessory).append(a)})}if(this.substitutes){var s="<tr>";s+=t.NewTD("Name","subCode","",!0),s+=t.NewTD("Description","subName","",!0),s+="</tr>",e(n.Substitute).append(s),this.substitutes.each(function(s){var a="<tr>";a+=t.NewTD(s.get("SubstituteName"),"subCode"),a+=t.NewTD(s.get("SubstituteDesc"),"subName"),a+="</tr>",e(n.Substitute).append(a)})}this.RefreshiScroll()},NewTD:function(e,t,s,a){var i="<td ",o="";return a&&(o=" summary-table-header "),t&&(i=i+' class="'+t+o+'" '),s&&(i=i+' id="'+t+'" '),i=i+">"+l.Escapedhtml(e)+"</td>"},Show:function(){this.render(),this.LoadOtherDetails()},Close:function(){this.remove(),this.unbind()},InitializeChildViews:function(){},RefreshiScroll:function(){return i.isBrowserMode?void l.UseBrowserScroll("#detail-body"):(this.myScroll?(this.myScroll.refresh(),e("#detail-body").height()<e("#summary-details").height()&&this.myScroll.scrollToElement("li:first-child",100)):this.myScroll=new iScroll("detail-body",{vScrollbar:!0,vScroll:!0,snap:!0,momentum:!0,useTransform:!1,onBeforeScrollStart:function(e){for(var t=e.target;1!=t.nodeType;)t=t.parentNode;"SELECT"!=t.tagName&&"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName&&e.preventDefault()}}),e("#detail-body div:first-child").css("width","100%"),void e(".tables").css("width","80%"))}});return u});