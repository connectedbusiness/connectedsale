define(["jquery","mobile","underscore","backbone","shared/global","shared/shared","view/19.0.0/pos/item/item","text!template/19.0.0/pos/item/items.tpl.html","js/libs/swipe.min.js"],function(e,i,t,n,r,s,o,a){var l,p=15,c=0,m=0;_currentPage=0;var h=n.View.extend({_template:t.template(a),events:{},BindDashBoardSwipe:function(){if(_currentPage=1,r.isBrowserMode){var i=this;e("#itemContainer").on("swiperight",function(e){i.SwipeRight(e)}),e("#itemContainer").on("swipeleft",function(e){i.SwipeLeft(e)}),e("#item-arrow-right").on("tap",function(e){i.SwipeLeft(e)}),e("#item-arrow-left").on("tap",function(e){i.SwipeRight(e)})}},SwipeLeft:function(i){i.stopPropagation(),r.isBrowserMode&&_currentPage>=m||(this.swipe&&(this.isSinglePage?e("#itemContainer").trigger("swipeleft"):this.swipe.next()),s.FocusToItemScan(),_currentPage++)},SwipeRight:function(i){i.stopPropagation(),r.isBrowserMode&&_currentPage<=1||(this.swipe&&(this.isSinglePage?e("#itemContainer").trigger("swiperight"):this.swipe.prev()),s.FocusToItemScan(),_currentPage--)},initialize:function(){this.collection.bind("reset",this.LoadItems,this),l=this.collection},render:function(){this.$el.html(this._template)},InitializeSwipe:function(i){this.swipe=new Swipe(document.getElementById(i),{callback:function(){var i=this.index+1;e("#itemBullet em").css("color","#CCC"),e("#"+i+"itemBullet").css("color","#6D6D6D"),this.index>1?this.isSinglePage=!0:this.isSinglePage=!1}});var t=this.swipe.index+1;e("#"+t+"itemBullet").css("color","#6D6D6D"),this.BindDashBoardSwipe()},LoadItems:function(){p=15,"Kiosk"===r.ApplicationType&&(p=12),c=this.collection.length;var i=c/p;this.render(),m=Math.ceil(i);for(var t=1;t<=m;t++)this.PaginateItems(p,t,c),c-=p;var n=e("#item").attr("id");this.InitializeSwipe(n),r.isBrowserMode&&m>1&&this.ShowPageNavigator()},PaginateItems:function(i,t,n){var s=l.paginate(i,t,n);e("#itemListContainer").append("<li><div id=item-"+t+"/></li>"),e("#itemBullet").append("<em id="+t+"itemBullet>&#8226;</em>");for(var a=0;a<s.length;a++){var p=s[a];this.itemView=new o({model:p}),e("#item-"+t).append(this.itemView.render().el),"Kiosk"===r.ApplicationType?2!==a&&5!==a&&8!==a&&11!==a||e("#"+p.cid).css({"margin-left":"0px","margin-right":"0px"}):2!==a&&5!==a&&8!==a&&11!==a&&14!=a||e("#"+p.cid).css({"margin-left":"0px","margin-right":"0px"})}},ShowPageNavigator:function(){e("#item-arrow-right").removeAttr("style"),e("#item-arrow-left").removeAttr("style")}});return h});