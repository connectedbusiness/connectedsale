define(["jquery","mobile","underscore","backbone","shared/global","shared/service","shared/method","model/lookupcriteria","collection/base","view/20.1.0/products/category/detail/sortorder/sortorderlist","text!template/20.1.0/products/category/detail/sortorder.tpl.html"],function(e,t,o,r,a,i,l,n,s,c,d){var g=r.View.extend({_template:o.template(d),events:{},initialize:function(){this.render()},render:function(){this.$el.html(this._template),this.InitializeChildViews()},InitializeChildViews:function(){this.InitializeSortOrderView()},InitializeSortOrderView:function(){this.categoryLookUp=new n;var e=100,t=this;this.categoryLookUp.set({SortOrderCriteria:"ParentCategory"}),this.categoryLookUp.url=a.ServiceUrl+i.PRODUCT+l.GETCATEGORYDETAILS+e,this.categoryLookUp.save(null,{success:function(e,o){t.DisplayParentNode(o.SystemCategories),t.InitializeParentNode()}})},DisplayParentNode:function(t){this.categoryCollection=new s,this.categoryCollection.reset(t),this.categoryCollection.each(function(t){var o=t.get("ParentCategory");o=o.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"),t.set({ParentID:o});new c({el:e("#sortOrderList"),model:t})})},InitializeParentNode:function(){this.categoryLookUp=new n;var e=100,t=this;this.categoryLookUp.set({SortOrderCriteria:"CategoryCode"}),this.categoryLookUp.url=a.ServiceUrl+i.PRODUCT+l.GETCATEGORYDETAILS+e,this.categoryLookUp.save(null,{success:function(e,o){t.DisplayChildNode(o.SystemCategories)}})},DisplayChildNode:function(t){this.parentCategoryItemCollection=new s,this.parentCategoryItemCollection.reset(t);this.parentCategoryItemCollection.each(function(t){var o=t.get("ParentCategory");o=o.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-");var r=t.get("CategoryCode").replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-");t.set({ParentID:o,ModelID:r}),e("#"+o).hasClass("childNode")?(e("#"+o).html(""),e("#"+o).append("<label>"+t.get("ParentCategory")+"</label><input type='checkbox' checked='checked' /><ol><li class='file childNode' id ="+r+"><a>"+t.get("CategoryCode")+"</a></li><ol>"),e("#"+o).removeClass("childNode"),e("#"+o).addClass("childNodeParent")):e("#"+o).hasClass("childNodeParent")?e("#"+o+" > ol").append("<li class='file childNode' id ="+r+"><a>"+t.get("CategoryCode")+"</a></li>"):(e("#"+o+"> input").removeAttr("disabled"),e("#"+o+"> ol").append("<li class='file childNode' id ="+r+"><a>"+t.get("CategoryCode")+"</a></li>"))})},LoadScroll:function(){this.myScroll=new iScroll("parentCategoryListContainer",{vScrollbar:!0,vScroll:!0,snap:!1,momentum:!0,zoom:!0,onBeforeScrollStart:function(e){for(var t=e.target;1!=t.nodeType;)t=t.parentNode;"SELECT"!=t.tagName&&"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName&&e.preventDefault()}}),setTimeout(function(){this.myScroll=new iScroll("parentCategoryListContainer",{vScrollbar:!0,vScroll:!0,snap:!1,momentum:!0,zoom:!0,onBeforeScrollStart:function(e){for(var t=e.target;1!=t.nodeType;)t=t.parentNode;"SELECT"!=t.tagName&&"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName&&e.preventDefault()}}),myScroll.refresh()},1e3)}});return g});