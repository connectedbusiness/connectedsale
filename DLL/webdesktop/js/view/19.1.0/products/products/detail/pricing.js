define(["jquery","mobile","underscore","backbone","shared/global","shared/shared","text!template/19.1.0/products/products/detail/pricing.tpl.html"],function(e,t,a,i,r,s,l){var o={AverageCost:".table-data #data-AverageCost",StandardCost:".table-data #data-StandardCost",CurrentCost:".table-data #data-CurrentCost",RetailPrice:".table-data #data-RetailPrice",WholesalePrice:".table-data #data-WholesalePrice"},n=i.View.extend({_pricingTemplate:a.template(l),events:{"change     .table-data #data-AverageCost":"txtChanged_AverageCost","change     .table-data #data-RetailPrice":"txtChanged_RetailPrice","change     .table-data #data-WholesalePrice":"txtChanged_WholesalePrice","blur       .table-data #data-AverageCost":"txtBlur_AverageCost","blur       .table-data #data-RetailPrice":"txtBlur_RetailPrice","blur       .table-data #data-WholesalePrice":"txtBlur_WholesalePrice","focus    \t.table-data #data-AverageCost":"SaveAndClearValue","focus    \t.table-data #data-RetailPrice":"SaveAndClearValue","focus      .table-data #data-WholesalePrice":"SaveAndClearValue","keypress #data-AverageCost":"txtKeypress","keypress #data-RetailPrice":"txtKeypress","keypress #data-WholesalePrice":"txtKeypress","keyup #data-AverageCost":"Price_Keyup","keyup #data-RetailPrice":"Price_Keyup","keyup #data-WholesalePrice":"Price_Keyup"},txtChanged_AverageCost:function(){this.InputError(o.AverageCost,!0);var t=e(o.AverageCost).val();this.model.set({AverageCost:t,CurrentCost:t,StandardCost:t}),this.pricing.HasChanges=!0},txtChanged_RetailPrice:function(){this.InputError(o.RetailPrice,!0);var t=e(o.RetailPrice).val();this.pricing.set({RetailPrice:t}),this.pricing.HasChanges=!0},txtChanged_WholesalePrice:function(){this.InputError(o.WholesalePrice,!0);var t=e(o.WholesalePrice).val();this.pricing.set({WholesalePrice:t}),this.pricing.HasChanges=!0},txtKeyDown:function(e){this.PreventNegative(e)&&e.preventDefault()},txtBlur_AverageCost:function(e){this.RevertPreviousValue(e.target.id),this.Validate(o.AverageCost)},txtBlur_RetailPrice:function(e){this.RevertPreviousValue(e.target.id),this.Validate(o.RetailPrice)},txtBlur_WholesalePrice:function(e){this.RevertPreviousValue(e.target.id),this.Validate(o.WholesalePrice)},txtKeypress:function(t){s.MaxDecimalPlaceValidation(e("#"+t.target.id),t)},Price_Keyup:function(t){"0."!=t.currentTarget.value&&"."!=t.currentTarget.value||(e(t.target).val("0.0"),e(t.target).focus(),e(t.target).val("0."))},PreventNegative:function(e){if(!e)return!1;var t=e.keyCode;return 109==t||189==t},initialize:function(){this.$el.show(),this.IsNew=!1},render:function(){return this.model.set({CurrencySymbol:r.CurrencySymbol}),this.model.set(this.pricing.attributes),this.$el.html(this._pricingTemplate(this.model.toJSON())),this.CheckItemType(),this.CheckReadOnlyMode(),this.CheckIsNew(),this},CheckIsNew:function(){this.IsNew||(e(".tr-cost-type").css("display","none"),e(".tr-cost-data").css("display","none"),e(".tr-cost-data-cost").css("display","none"))},CheckReadOnlyMode:function(){this.options.IsReadOnly&&(e(o.AverageCost).addClass("ui-readonly"),e(o.RetailPrice).addClass("ui-readonly"),e(o.WholesalePrice).addClass("ui-readonly"),e(".tr-cost-type").css("display","none"),e(".tr-cost-data").css("display","none"),e(".tr-cost-data-cost").css("display","none"))},Show:function(){this.render()},Close:function(){this.remove(),this.unbind()},InitializeChildViews:function(){},InputError:function(t,a){a?e(t).removeClass("cs-input-error"):e(t).addClass("cs-input-error")},CheckItemType:function(){if(this.model){var t=this.model.get("ItemType"),a="";"Gift Card"!=t&&"Gift Certificate"!=t||(a="none"),e(".tr-cost-type").css("display",a),e(".tr-cost-data").css("display",a),e(".tr-cost-data-cost").css("display",a),e(".tr-pricing-data-retail").css("display",a)}},Validate:function(t){return!this.model||!this.pricing||((!t||t==o.AverageCost)&&e.trim(this.model.get("AverageCost"))<0?(this.ValidationError="AverageCost",this.trigger("validationError"),this.InputError(t),!1):(!t||t==o.WholesalePrice)&&e.trim(this.pricing.get("WholesalePrice"))<0?(this.ValidationError="WholesalePrice",this.trigger("validationError"),this.InputError(t),!1):!((!t||t==o.RetailPrice)&&e.trim(this.pricing.get("RetailPrice"))<0)||(this.ValidationError="RetailPrice",this.trigger("validationError"),this.InputError(t),!1))},SaveAndClearValue:function(t){var a="#"+t.target.id,i=e(a).val();switch(t.target.id){case"data-AverageCost":this.cost=i;break;case"data-RetailPrice":this.retail=i;break;case"data-WholesalePrice":this.wholesale=i}e(a).val(""),this.AssignNumericValidation(t)},AssignNumericValidation:function(e){var t="#"+e.target.id;s.Input.NonNegative(t)},RevertPreviousValue:function(t){var a=e("#"+t).val(),i="";if(""!==a)i=parseFloat(a);else switch(t){case"data-AverageCost":i=this.cost;break;case"data-RetailPrice":i=this.retail;break;case"data-WholesalePrice":i=this.wholesale}e("#"+t).val(i)}});return n});