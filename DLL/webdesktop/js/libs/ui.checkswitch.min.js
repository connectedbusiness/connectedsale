!function(e,t,n){function a(e,t){return this.namespace="CheckSwitch",this instanceof a?this.init(e,t):new a(e,t)}function i(e,t,n){var a=n;return e.attachEvent("on"+t,a),{detach:function(){e.detachEvent("on"+t,a)}}}function s(e,n,a){var i;"createEvent"in t?(i=t.createEvent("UIEvents"),i.initEvent(n,!1,!0),i.checkSwitch=a,e.dispatchEvent(i)):"createEventObject"in t&&(i=t.createEventObject(),i.name=n,i.checkSwitch=a,e.fireEvent("ondataavailable",i))}function c(t,n,a){e.addEventListener?t.addEventListener(n,a,!1):t[n]?t.attachEvent("on"+n,a):t.attachEvent("ondataavailable",function(e){e.func=e.func||{},e.func[n]=a,e.func[e.name]&&(e.func[e.name](e),e.name=null)})}function o(e,n){var a=t.body,i=t.documentElement;return u?pagePos=e.changedTouches[0][n]:e[n]?pagePos=e[n]:"pageX"===n?pagePos=e.clientX+a.scrollLeft+i.scrollLeft:pagePos=e.clientY+a.scrollTop+i.scrollTop,pagePos}function r(e,t){var a=n;for(a in t)e.style[a]=t[a]}function l(e,t){var a=n;for(a in t){if(!(a in e))break;e[a]=t[a]}return e}var u="ontouchstart"in e,d="addEventListener"in e,f=u?"touchstart":"mousedown",h=u?"touchmove":"mousemove",v=u?"touchend":"mouseup";a.prototype={init:function(e,a){var i=this;if("string"==typeof e?i.elem=t.getElementById(e.replace("#","")):i.elem=e,"INPUT"!==i.elem.nodeName||"checkbox"!==i.elem.type)throw Error("You can't use "+i.namespace+" for except input[type=checkbox]");i.conf=l({checkOnText:"ON",checkOffText:"OFF",uiClass:"ui_check_switch",uiOnClass:"ui_check_switch_on",uiOffClass:"ui_check_switch_off",uiInnerClass:"ui_check_switch_inner",uiSliderClass:"ui_check_switch_slider",uiTextClass:"ui_check_text",uiKnobClass:"ui_check_knob",uiCheckOffClass:"ui_check_off",uiCheckOnClass:"ui_check_on"},a||{}),i.onClass=i.conf.uiClass+" "+i.conf.uiOnClass,i.offClass=i.conf.uiClass+" "+i.conf.uiOffClass,i.elemDefDisplay=n,i.elem.currentStyle?i.elemDefDisplay=i.elem.currentStyle.display:i.elemDefDisplay=getComputedStyle(i.elem).display,i.state=!1,i.touchEnabled=!0,i.currentPoint=0,i.currentX=0,i.maxX=i.elem.offsetWidth,i.disabled=!1,i.destroyed=!1,i._view(),i._setHandle()},_setHandle:function(){var e=this;d?(e.view.addEventListener(f,e,!1),t.addEventListener(h,e,!1),t.addEventListener(v,e,!1)):(e.handledStart=i(e.view,f,function(t){e._touchStart(t)}),e.handledMove=i(t.body,h,function(t){e._touchMove(t)}),e.handledEnd=i(t.body,v,function(t){e._touchEnd(t)}))},handleEvent:function(e){var t=this;switch(e.type){case f:t._touchStart(e);break;case h:t._touchMove(e);break;case v:t._touchEnd(e);break;case"click":t._click(e)}},_touchStart:function(e){var t=this;t.touchEnabled&&!t.disabled&&(u||(d?e.preventDefault():e.returnValue=!1),t.scrolling=!0,t.moveReady=!1,t.startPageX=o(e,"pageX"),t.startPageY=o(e,"pageY"),t.basePageX=t.startPageX,t.directionX=0,t.startTime=e.timeStamp)},_touchMove:function(e){var t=this,a=n,i=n,s=n,c=n,r=n;t.scrolling&&(a=o(e,"pageX"),i=o(e,"pageY"),t.moveReady?(d?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0),s=a-t.basePageX,t.directionX=s,t._moving(),t._slide(t.directionX)):(c=Math.abs(a-t.startPageX),r=Math.abs(i-t.startPageY),c>5?(d?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0),t.moveReady=!0):r>5&&(t.scrolling=!1)),t.basePageX=a)},_touchEnd:function(e){var t=this;t.conf;t.scrolling&&(t.moveReady?t.getState()?t.sliderCurrent<=-t.range/2?t._off():t._on():-t.range/2<=t.sliderCurrent?t._on():t._off():t.getState()?t._off():t._on(),t.scrolling=!1)},_view:function(){var e=this,n=e.conf;return e.view=t.createElement("span"),e.view.className=n.uiClass,e.view.innerHTML=['<span class="'+n.uiInnerClass+'">','<span class="'+n.uiSliderClass+'">','<span class="'+n.uiCheckOnClass," "+n.uiTextClass,'">'+n.checkOnText+"</span>",'<span class="'+n.uiKnobClass+'"></span>','<span class="'+n.uiCheckOffClass," "+n.uiTextClass,'">'+n.checkOffText+"</span>","</span>","</span>"].join(""),e.slider=e.view.childNodes[0].childNodes[0],e.knob=e.slider.childNodes[1],e.elem.parentNode.insertBefore(e.view,e.elem.nextSibling),r(e.elem,{display:"none"}),e.range=(e.slider.offsetWidth-e.knob.offsetWidth)/2,e.sliderCurrent=e.getState()?0:-e.range,e._setSliderPos(e.sliderCurrent),setTimeout(function(){e.getState()?e._on():e._off()},0),e.view},_slide:function(e){var t=this,n=t.sliderCurrent,a=n+e;a>=0?a=0:a<=-t.range&&(a=-t.range),t.sliderCurrent=a,t._setSliderPos(a)},_moving:function(){var e=this;e.view.className=e.conf.uiClass},_setSliderPos:function(e){var t=this;t.sliderCurrent=e,r(t.slider,{marginLeft:e+"px"})},_on:function(){var e=this,t=e.conf,n=t.uiClass+" "+t.uiOnClass;e._setState(!0),e.currentX=0,e._setSliderPos(0),e.view.className=n,s(e.view,"checkSwitch:on",{elem:e.elem,id:e.elem.id,name:e.elem.name})},_off:function(){var e=this,t=e.conf,n=t.uiClass+" "+t.uiOffClass;e._setState(!1),e.currentX=-e.range,e._setSliderPos(-e.range),e.view.className=n,s(e.view,"checkSwitch:off",{elem:e.elem,id:e.elem.id,name:e.elem.name})},_setState:function(e){var t=this;t.elem.checked=e?"checked":""},getState:function(){var e=this;return!!e.elem.checked},on:function(){var e=this;e._on()},off:function(){var e=this;e._off()},bind:function(e){var t=this,a=n;for(a in e)c(t.view,a,e[a])},destroy:function(){var e=this;d?(t.removeEventListener(h,e,!1),t.removeEventListener(v,e,!1)):(e.handledMove.detach(),e.handledEnd.detach()),e.view.parentNode.removeChild(e.view),r(e.elem,{display:e.elemDefDisplay})}},e.CheckSwitch=a}(this,this.document);