/*

jSignature v2
Copyright (c) 2012 Willow Systems Corp http://willow-systems.com
Copyright (c) 2010 Brinley Ang http://www.unbolt.net
MIT License <http://www.opensource.org/licenses/mit-license.php> 


jSignature v2 jSignature's custom "base30" format export and import plugins.
Copyright (c) 2011 Willow Systems Corp http://willow-systems.com
MIT License <http://www.opensource.org/licenses/mit-license.php>


Simplify.js BSD 
(c) 2012, Vladimir Agafonkin
mourner.github.com/simplify-js


base64 encoder
MIT, GPL
http://phpjs.org/functions/base64_encode
+   original by: Tyler Akins (http://rumkin.com)
+   improved by: Bayron Guevara
+   improved by: Thunder.m
+   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
+   bugfixed by: Pellentesque Malesuada
+   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
+   improved by: Rafal Kukawski (http://kukawski.pl)


jSignature v2 SVG export plugin.
Copyright (c) 2012 Willow Systems Corp http://willow-systems.com
MIT License <http://www.opensource.org/licenses/mit-license.php>

*/
(function(){if(null==this.jQuery)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");(function(j){function p(a){for(var b,e=a.css("color"),d;void 0===d&&void 0!==a;){try{b=a.css("background-color")}catch(c){b="transparent"}"transparent"!==b&&"rgba(0, 0, 0, 0)"!==b&&(d=b);try{a=a.parent(),a[0]===document&&(a=void 0)}catch(f){a=void 0}}var a=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/,g=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/,
h;b=void 0;(b=e.match(a))?h={r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}:(b=e.match(g))&&(h={r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)});var k;d?(b=void 0,(b=d.match(a))?k={r:parseInt(b[1],10),g:parseInt(b[2],10),b:parseInt(b[3],10)}:(b=d.match(g))&&(k={r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)})):k=h?127<Math.max.apply(null,[h.r,h.g,h.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255}:{r:255,g:255,b:255};b=function(a){return"rgb("+[a.r,a.g,a.b].join(", ")+
")"};h&&k?(a=Math.max.apply(null,[h.r,h.g,h.b]),h=Math.max.apply(null,[k.r,k.g,k.b]),h=Math.round(h+-0.75*(h-a)),h={r:h,g:h,b:h}):h?(h=Math.max.apply(null,[h.r,h.g,h.b]),a=1,127<h&&(a=-1),h=Math.round(h+96*a),h={r:h,g:h,b:h}):h={r:191,g:191,b:191};return{color:e,"background-color":k?b(k):d,"decor-color":b(h)}}function i(a,b){this.x=a;this.y=b;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,
2)+Math.pow(this.y,2)));return this._length};var e=function(a){return Math.round(a/Math.abs(a))};this.resizeTo=function(a){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=a,this.y=a*e(this.y);else if(0===this.y)this._length=a,this.x=a*e(this.x);else{var b=Math.abs(this.y/this.x),d=Math.sqrt(Math.pow(a,2)/(1+Math.pow(b,2))),b=b*d;this._length=a;this.x=d*e(this.x);this.y=b*e(this.y)}return this};this.angleTo=function(a){var b=this.getLength()*a.getLength();return 0===b?0:Math.acos(Math.min(Math.max((this.x*
a.x+this.y*a.y)/b,-1),1))/Math.PI}}function l(a,b){this.x=a;this.y=b;this.getVectorToCoordinates=function(a,b){return new i(a-this.x,b-this.y)};this.getVectorFromCoordinates=function(a,b){return this.getVectorToCoordinates(a,b).reverse()};this.getVectorToPoint=function(a){return new i(a.x-this.x,a.y-this.y)};this.getVectorFromPoint=function(a){return this.getVectorToPoint(a).reverse()}}function q(a){this.data=a;this.changed=function(){};this.startStrokeFn=function(){};this.addToStrokeFn=function(){};
this.endStrokeFn=function(){};this.inStroke=!1;this._stroke=this._lastPoint=null;this.startStroke=function(a){if(a&&"number"==typeof a.x&&"number"==typeof a.y){this._stroke={x:[a.x],y:[a.y]};this.data.push(this._stroke);this._lastPoint=a;this.inStroke=!0;var e=this._stroke,d=this.startStrokeFn;setTimeout(function(){d(e)},3);return a}return null};this.addToStroke=function(a){if(this.inStroke&&"number"===typeof a.x&&"number"===typeof a.y&&4<Math.abs(a.x-this._lastPoint.x)+Math.abs(a.y-this._lastPoint.y)){var e=
this._stroke.x.length;this._stroke.x.push(a.x);this._stroke.y.push(a.y);this._lastPoint=a;var d=this._stroke,c=this.addToStrokeFn;setTimeout(function(){c(d,e)},3);return a}return null};this.endStroke=function(){var a=this.inStroke;this.inStroke=!1;this._lastPoint=null;if(a){var e=this.endStrokeFn,d=this._stroke;setTimeout(function(){e(d)},3);setTimeout(this.changed,3);return!0}return null}}function r(a,b){var e=new Image,d=this;e.onload=function(){d.getContext("2d").drawImage(e,0,0,e.width<d.width?
e.width:d.width,e.height<d.height?e.height:d.height)};e.src="data:"+b+","+a}function t(a){this.find("canvas."+g).add(this.filter("canvas."+g)).data(g+".reset")(a);return this}function n(a,b){if(void 0===b&&("string"===typeof a&&"data:"===a.substr(0,5))&&(b=a.slice(5).split(",")[0],a=a.slice(6+b.length),b===a))return;var e=this.find("canvas."+g).add(this.filter("canvas."+g));if(d.hasOwnProperty(b))0!==e.length&&d[b].call(e[0],a,b,e.data(g+".reset"));else throw Error(g+" is unable to find import plugin with for format '"+
(""+b)+"'");return this}var g="jSignature",z={},B=function(a){var b={},e={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10},d=j(this);j.extend(e,p(d));a&&j.extend(e,a);e.width===e.height&&"ratio"===e.height&&(e.width="100%");var c=document.createElement("canvas");c.style.width="ratio"===e.width?"1px":e.width.toString(10);c.style.height="ratio"===e.height?"1px":e.height.toString(10);var f=j(c);f.appendTo(d);
"ratio"===e.height?c.style.height=Math.round(c.offsetWidth/e.sizeRatio).toString(10)+"px":"ratio"===e.width&&(c.style.width=Math.round(c.offsetHeight*e.sizeRatio).toString(10)+"px");c.width=c.offsetWidth;c.height=c.offsetHeight;f.addClass(g);var m=function(){if(c.getContext)return false;if(typeof FlashCanvas!=="undefined"){c=FlashCanvas.initElement(c);var a=1;window&&(window.screen&&window.screen.deviceXDPI&&window.screen.logicalXDPI)&&(a=window.screen.deviceXDPI*1/window.screen.logicalXDPI);if(a!==
1){f.children("object").get(0).resize(Math.ceil(c.width*a),Math.ceil(c.height*a));c.getContext("2d").scale(a,a)}return true}throw Error("Canvas element does not support 2d context. "+g+" cannot proceed.");}();e.lineWidth=0===e.lineWidth?Math.max(Math.round(c.width/400),2):e.lineWidth;var h=600>c.width?!0:!1;c.onselectstart=function(a){a&&a.preventDefault&&a.preventDefault();a&&a.stopPropagation&&a.stopPropagation();return false};e.cssclass&&""!=j.trim(e.cssclass)&&f.addClass(e.cssclass);var k=c.getContext("2d"),
D,o,r,t,u,n,K=-1*Math.round(e.lineWidth/2),G=function(a,b,c,d){k.beginPath();k.moveTo(a,b);k.lineTo(c,d);k.stroke()},a=function(a){var b=c.width,A=c.height;k.clearRect(0,0,b+30,A+30);k.shadowColor=k.fillStyle=e["background-color"];m&&k.fillRect(0,0,b+30,A+30);k.lineWidth=Math.ceil(parseInt(e.lineWidth,10));k.lineCap=k.lineJoin="round";var i=Math.round(A/5);k.strokeStyle=e["decor-color"];k.shadowOffsetX=0;k.shadowOffsetY=0;G(i*1.5,A-i,b-i*1.5,A-i);k.strokeStyle=e.color;if(!m&&!h){k.shadowColor=k.strokeStyle;
k.shadowOffsetX=k.lineWidth*0.5;k.shadowOffsetY=k.lineWidth*-0.6;k.shadowBlur=0}if(a===void 0)a=[];else for(var b=a.length,j=0;j<b;j++){A=a[j];i=A.x.length;o(A);for(var H=1;H<i;H++)r(A,H);t(A)}D=new q(a);D.startStrokeFn=o;D.addToStrokeFn=r;D.endStrokeFn=t;D.changed=function(){d.trigger("change")};f.data(g+".data",a);e.data=a;f.data(g+".settings",e);return true},v=null,w=function(a){try{a.preventDefault()}catch(b){}clearTimeout(v);D.endStroke()},B=0,L=function(a){a=a.changedTouches&&a.changedTouches.length>
0?a.changedTouches[0]:a;return new l(Math.round(a.pageX+u),Math.round(a.pageY+n)+B)},F=function(a){a.preventDefault();var b=f.offset();u=b.left*-1;n=b.top*-1;D.startStroke(L(a));clearTimeout(v);v=setTimeout(w,750)},I=function(a){a.preventDefault();if(D.inStroke&&D.addToStroke(L(a))){clearTimeout(v);v=setTimeout(w,750)}},J=3*e.lineWidth;o=function(a){var b=a.x[0],a=a.y[0];k.fillStyle=e.color;k.fillRect(b+K,a+K,e.lineWidth,e.lineWidth);k.fillStyle=e["background-color"]};r=function(a,b){var c=new l(a.x[b-
1],a.y[b-1]),d=new l(a.x[b],a.y[b]),e=c.getVectorToPoint(d);if(b>1){var f=new l(a.x[b-2],a.y[b-2]),h=f.getVectorToPoint(c),s;if(h.getLength()>J){s=b>2?(new l(a.x[b-3],a.y[b-3])).getVectorToPoint(f):new i(0,0);var g=h.getLength()*0.35,C=h.angleTo(s.reverse()),E=e.angleTo(h.reverse());s=(new i(s.x+h.x,s.y+h.y)).resizeTo(Math.max(0.05,C)*g);var j=(new i(h.x+e.x,h.y+e.y)).reverse().resizeTo(Math.max(0.05,E)*g),h=f.x,g=f.y,E=c.x,C=c.y,m=f.x+s.x,f=f.y+s.y;s=c.x+j.x;j=c.y+j.y;k.beginPath();k.moveTo(h,g);
k.bezierCurveTo(m,f,s,j,E,C);k.stroke()}}e.getLength()<=J&&G(c.x,c.y,d.x,d.y)};t=function(a){var b=a.x.length-1;if(b>0){var c=new l(a.x[b],a.y[b]),d=new l(a.x[b-1],a.y[b-1]),e=d.getVectorToPoint(c);if(e.getLength()>J)if(b>1){var a=(new l(a.x[b-2],a.y[b-2])).getVectorToPoint(d),f=(new i(a.x+e.x,a.y+e.y)).resizeTo(e.getLength()/2),e=d.x,a=d.y,b=c.x,h=c.y,s=d.x+f.x,d=d.y+f.y,f=c.x,c=c.y;k.beginPath();k.moveTo(e,a);k.bezierCurveTo(s,d,f,c,b,h);k.stroke()}else G(d.x,d.y,c.x,c.y)}};m?f.bind("mousedown."+
g,function(a){f.unbind("mousedown."+g);F(a);f.bind("mousemove."+g,I);f.bind("mouseup."+g,w);f.bind("mousedown."+g,F)}):(c.ontouchstart=function(a){c.onmousedown=null;c.onmouseup=null;c.onmousemove=null;B=e.minFatFingerCompensation&&e.lineWidth*-3>e.minFatFingerCompensation?e.lineWidth*-3:e.minFatFingerCompensation;F(a);c.ontouchend=w;c.ontouchstart=F;c.ontouchmove=I},c.onmousedown=function(a){c.ontouchstart=null;c.ontouchend=null;c.ontouchmove=null;F(a);c.onmousedown=F;c.onmouseup=w;c.onmousemove=
I});f.data(g+".reset",a);(function(a){return a==="ratio"||a.split("")[a.length-1]==="%"})(e.width.toString(10))&&(b[g+".parentresized"]=j.fn[g]("PubSub").subscribe(g+".parentresized",function(a,b,c,d){return function(){var e=c.width();if(e!==d){var f=c[b]("PubSub"),h;for(h in a)if(a.hasOwnProperty(h)){f.unsubscribe(a[h]);delete a[h]}h=c.find("canvas");f=h.data(b+".settings");h.remove();h=f.data;var e=e*1/d,k=[],s,g,i,C,j,E;g=0;for(i=h.length;g<i;g++){E=h[g];s={x:[],y:[]};C=0;for(j=E.x.length;C<j;C++){s.x.push(E.x[C]*
e);s.y.push(E.y[C]*e)}k.push(s)}f.data=k;c[b](f)}}}(b,g,d,d.width(),1*c.width/c.height)));z.windowresize||(z.windowresize=!0,function(a,b,c){var d,e=function(){b.fn[a]("PubSub").publish(a+".parentresized")};b(c).bind("resize."+a,function(){d&&clearTimeout(d);d=setTimeout(e,700)})}(g,j,window));b[g+".windowmouseup"]=j.fn[g]("PubSub").subscribe(g+".windowmouseup",w);z.windowmouseup||(z.windowmouseup=!0,function(a,b,c){b(c).bind("mouseup."+a,function(c){b.fn[a]("PubSub").publish(a+".windowmouseup",c)})}(g,
j,window));a(e.data)},o={"default":function(){return this.toDataURL()},"native":function(a){return a},image:function(){var a=this.toDataURL();if("string"===typeof a&&4<a.length&&"data:"===a.slice(0,5)&&-1!==a.indexOf(",")){var b=a.indexOf(",");return[a.slice(5,b),a.substr(b+1)]}return[]}},d={"native":function(a,b,c){c(a)},image:r,"image/png;base64":r,"image/jpeg;base64":r,"image/jpg;base64":r},f=new function(){this.topics={};this.publish=function(a,b,c,d){if(this.topics[a])for(var f=this.topics[a],
g=Array.prototype.slice.call(arguments,1),i=0,h=f.length;i<h;i++)f[i].apply(null,g)};this.subscribe=function(a,b){this.topics[a]?this.topics[a].push(b):this.topics[a]=[b];return{topic:a,callback:b}};this.unsubscribe=function(a){if(this.topics[a.topic])for(var b=this.topics[a.topic],c=0,d=b.length;c<d;c++)b[c]===a.callback&&b.splice(c,1)}},c={init:function(a){return this.each(function(){B.call(this,a)})},getSettings:function(){return this.find("canvas."+g).add(this.filter("canvas."+g)).data(g+".settings")},
clear:t,reset:t,addPlugin:function(a,b,c){var f={"export":o,"import":d};f.hasOwnProperty(a)&&(f[a][b]=c);return this},listPlugins:function(a){var b={"export":o,"import":d},c=[];if(b.hasOwnProperty(a)){var a=b[a],f;for(f in a)a.hasOwnProperty(f)&&c.push(f)}return c},getData:function(a){var b=this.find("canvas."+g).add(this.filter("canvas."+g));void 0===a&&(a="default");if(0!==b.length&&o.hasOwnProperty(a))return o[a].call(b.get(0),b.data(g+".data"))},importData:n,setData:n,PubSub:function(){return f}};
j.fn[g]=function(a){if(!a||"object"===typeof a)return c.init.apply(this,arguments);if("string"===typeof a&&c[a])return c[a].apply(this,Array.prototype.slice.call(arguments,1));j.error("Method "+a+" does not exist on jQuery."+g)}})(this.jQuery)})("undefined"!==typeof window?window:this);
(function(){for(var j={},p={},i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),l=i.length/2,q=l-1;-1<q;q--)j[i[q]]=i[q+l],p[i[q+l]]=i[q];var r=function(d){for(var d=d.split(""),f=d.length,c=1;c<f;c++)d[c]=j[d[c]];return d.join("")},t=function(d){for(var f=[],c=0,a=1,b=d.length,e,g,i=0;i<b;i++)e=Math.round(d[i]),g=e-c,c=e,0>g&&0<a?(a=-1,f.push("Z")):0<g&&0>a&&(a=1,f.push("Y")),e=Math.abs(g),e>=l?f.push(r(e.toString(l))):f.push(e.toString(l));return f.join("")},n=function(d){for(var f=
[],d=d.split(""),c=d.length,a,b=1,e=[],g=0,i=0;i<c;i++)(a=d[i],a in j||"Z"===a||"Y"===a)?(0!==e.length&&(e=parseInt(e.join(""),l)*b+g,f.push(e),g=e),"Z"===a)?(b=-1,e=[]):"Y"===a?(b=1,e=[]):e=[a]:e.push(p[a]);f.push(parseInt(e.join(""),l)*b+g);return f},g=function(d){for(var f=[],c=d.length,a,b=0;b<c;b++)a=d[b],f.push(t(a.x)),f.push(t(a.y));return f.join("_")},z=function(d){for(var f=[],d=d.split("_"),c=d.length/2,a=0;a<c;a++)f.push({x:n(d[2*a]),y:n(d[2*a+1])});return f},B=function(d){return["image/jsignature;base30",
g(d)]},o=function(d,f,c){"string"===typeof d&&("image/jsignature;base30"===d.substring(0,23).toLowerCase()&&(d=d.substring(24)),c(z(d)))};if(null==this.jQuery)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");(function(d){d=d.fn.jSignature;d("addPlugin","export","base30",B);d("addPlugin","export","image/jsignature;base30",B);d("addPlugin","import","base30",o);d("addPlugin","import","image/jsignature;base30",o)})(this.jQuery);this.jSignatureDebug&&
(this.jSignatureDebug.base30={remapTailChars:r,compressstrokeleg:t,uncompressstrokeleg:n,compressstrokes:g,uncompressstrokes:z,charmap:j})}).call("undefined"!==typeof window?window:this);
(function(){function j(d,f){this.x=d;this.y=f;this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)};this._length=null;this.getLength=function(){this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)));return this._length};var c=function(a){return Math.round(a/Math.abs(a))};this.resizeTo=function(a){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=a,this.y=a*c(this.y);else if(0===this.y)this._length=a,this.x=a*c(this.x);else{var b=Math.abs(this.y/
this.x),d=Math.sqrt(Math.pow(a,2)/(1+Math.pow(b,2))),b=b*d;this._length=a;this.x=d*c(this.x);this.y=b*c(this.y)}return this};this.angleTo=function(a){var b=this.getLength()*a.getLength();return 0===b?0:Math.acos(Math.min(Math.max((this.x*a.x+this.y*a.y)/b,-1),1))/Math.PI}}function p(d,f){this.x=d;this.y=f;this.getVectorToCoordinates=function(c,a){return new j(c-this.x,a-this.y)};this.getVectorFromCoordinates=function(c,a){return this.getVectorToCoordinates(c,a).reverse()};this.getVectorToPoint=function(c){return new j(c.x-
this.x,c.y-this.y)};this.getVectorFromPoint=function(c){return this.getVectorToPoint(c).reverse()}}function i(d,f){var c=Math.pow(10,f);return Math.round(d*c)/c}function l(d,f,c){var f=f+1,a=new p(d.x[f-1],d.y[f-1]),b=new p(d.x[f],d.y[f]),b=a.getVectorToPoint(b),e=new p(d.x[f-2],d.y[f-2]),a=e.getVectorToPoint(a);return a.getLength()>c?(c=2<f?(new p(d.x[f-3],d.y[f-3])).getVectorToPoint(e):new j(0,0),d=0.35*a.getLength(),e=a.angleTo(c.reverse()),f=b.angleTo(a.reverse()),c=(new j(c.x+a.x,c.y+a.y)).resizeTo(Math.max(0.05,
e)*d),b=(new j(a.x+b.x,a.y+b.y)).reverse().resizeTo(Math.max(0.05,f)*d),b=new j(a.x+b.x,a.y+b.y),["c",i(c.x,2),i(c.y,2),i(b.x,2),i(b.y,2),i(a.x,2),i(a.y,2)]):["l",i(a.x,2),i(a.y,2)]}function q(d,f){var c=d.x.length-1,a=new p(d.x[c],d.y[c]),b=new p(d.x[c-1],d.y[c-1]),a=b.getVectorToPoint(a);if(1<c&&a.getLength()>f){var c=(new p(d.x[c-2],d.y[c-2])).getVectorToPoint(b),b=a.angleTo(c.reverse()),e=0.35*a.getLength(),c=(new j(c.x+a.x,c.y+a.y)).resizeTo(Math.max(0.05,b)*e);return["c",i(c.x,2),i(c.y,2),i(a.x,
2),i(a.y,2),i(a.x,2),i(a.y,2)]}return["l",i(a.x,2),i(a.y,2)]}function r(d,f,c){for(var f=["M",x=i(d.x[0]-f,2),y=i(d.y[0]-c,2)],c=1,a=d.x.length-1;c<a;c++)f.push.apply(f,l(d,c,1));0<a?f.push.apply(f,q(d,c,1)):0===a&&f.push.apply(f,["l",1,1]);return f.join(" ")}function t(d){var f=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],c,a=d.length,b,e=[],g=[],i=b=c=0,j=0,m=[];if(0!==a){for(c=0;c<
a;c++){i=d[c];j=[];b={x:[],y:[]};for(var h=void 0,k=void 0,h=0,k=i.x.length;h<k;h++)j.push({x:i.x[h],y:i.y[h]});j=simplify(j,0.7,!0);h=0;for(k=j.length;h<k;h++)b.x.push(j[h].x),b.y.push(j[h].y);m.push(b);e=e.concat(b.x);g=g.concat(b.y)}d=Math.min.apply(null,e)-1;a=Math.max.apply(null,e)+1;e=Math.min.apply(null,g)-1;g=Math.max.apply(null,g)+1;i=0>d?0:d;j=0>e?0:e;c=a-d;b=g-e}f.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+c.toString()+'" height="'+b.toString()+'">');c=0;for(a=
m.length;c<a;c++)b=m[c],f.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+r(b,i,j)+'"/>');f.push("</svg>");return f.join("")}function n(d){return[B,t(d)]}function g(d){return[o,z(t(d))]}(function(d,f){"use strict";(typeof exports!=f+""?exports:d).simplify=function(c,a,b){a=a!==f?a*a:1;if(!b){for(var d=c.length,g,i=c[0],j=[i],b=1;b<d;b++){g=c[b];var m=g.x-i.x,h=g.y-i.y;m*m+h*h>a&&(j.push(g),i=g)}c=(i!==g&&j.push(g),j)}g=c;var b=g.length,
d=new (typeof Uint8Array!=f+""?Uint8Array:Array)(b),i=0,j=b-1,k,l,o=[],r=[],t=[];for(d[i]=d[j]=1;j;){h=0;for(m=i+1;m<j;m++){k=g[m];var u=g[i],p=g[j],n=u.x,q=u.y,u=p.x-n,v=p.y-q,w=void 0;if(0!==u||0!==v)w=((k.x-n)*u+(k.y-q)*v)/(u*u+v*v),1<w?(n=p.x,q=p.y):0<w&&(n+=u*w,q+=v*w);k=(u=k.x-n,v=k.y-q,u*u+v*v);k>h&&(l=m,h=k)}h>a&&(d[l]=1,o.push(i),r.push(l),o.push(l),r.push(j));i=o.pop();j=r.pop()}for(m=0;m<b;m++)d[m]&&t.push(g[m]);return c=t,c}})(this);if("function"!==typeof z)var z=function(d){var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),
c,a,b,e,g=0,i=0,j="",j=[];do c=d.charCodeAt(g++),a=d.charCodeAt(g++),b=d.charCodeAt(g++),e=c<<16|a<<8|b,c=e>>18&63,a=e>>12&63,b=e>>6&63,e&=63,j[i++]=f[c]+f[a]+f[b]+f[e];while(g<d.length);j=j.join("");d=d.length%3;return(d?j.slice(0,d-3):j)+"===".slice(d||3)};var B="image/svg+xml",o="image/svg+xml;base64";if(null==this.jQuery)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");(function(d){d=d.fn.jSignature;d("addPlugin","export","svg",n);d("addPlugin",
"export",B,n);d("addPlugin","export","svgbase64",g);d("addPlugin","export",o,g)})(this.jQuery)}).call("undefined"!==typeof window?window:this);